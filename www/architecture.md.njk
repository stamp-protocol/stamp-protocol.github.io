---
layout: page.njk
title: 'Stamp architecture'
og_image: '/assets/images/logo-v3.svg'
---

{% from 'includes/components/transaction.njk' import main as transaction %}

## Architecture

Let's go over some important pieces about how Stamp works.

<a id="arch-admin-keys"></a>

### Admin keys and policies

<a id="arch-dag"></a>

### DAG

Each identity is a DAG (Directed Acyclic Graph) of modifications created by the
identity's owner which are signed by one of the keys belonging to the identity.
Each transaction, except for the first, references the transaction(s) directly before it.
This creates a chain of modifications that, when applied in order, build a full
identity that can be cryptographically verified.

<div class="grid md:grid-cols-3 gap-4">
	{{ transaction('0a4b41', '[]', 'CreateIdentity', 'text-red-600') }}
	{{ transaction('f8bb77', '[<span class="text-red-600">0a4b41</span>]', 'MakeClaim', 'text-green-600') }}
	{{ transaction('9221d1', '[<span class="text-green-600">f8bb77</span>]', 'AddSubkey', 'text-blue-600') }}
</div>

All private data within an identity (private keys, private claim data) is encrypted
by a master key generated from a passphrase of your choosing. Even if your full Stamp
identity is stolen, it is protected by your master key (so choose a good passphrase).

Each transaction ID is a signature by one of the identity's admin keys on the transaction
entry, which holds the transaction's body and points back to previous transactions.

Here's what a published identity looks like:

```
---
id:
  Blake2b256: 75MguOCY_ud5g4Z1DiGcz2bcPK29UR_MXhSpwy64VCU
entry:
  created: "2023-04-25T06:45:00.956Z"
  previous_transactions: []
  body:
    PublishV1:
      transactions:
        transactions:
          - id:
              Blake2b256: zef-qw6W5lh_xC_zXJ9dX-AF8IyYQu22kd5oSQIciS0
            entry:
              created: "2023-04-25T06:26:09.387Z"
              previous_transactions: []
              body:
                CreateIdentityV1:
                  admin_keys:
                    - key:
                        Ed25519:
                          public: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
                          secret: ~
                      name: alpha
                      description: Your main admin key
                      revocation: ~
                  policies:
                    - capabilities:
                        - Permissive
                      multisig_policy:
                        MOfN:
                          must_have: 1
                          participants:
                            - Key:
                                name: ~
                                key:
                                  Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
            signatures:
              - Key:
                  key:
                    Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
                  signature:
                    Ed25519: WM9NUsjit2kl6IAMZk_lya2rp_Weeq1RVS8v4zNY4AwKUD3SRLsv1wEKHc-YIvVNdTB97b0Yt00SXs8X-3QcAw
          - id:
              Blake2b256: 3TPOHkcINhwLlTqIaheIqCx8m-AonMp3nEGN7FK_YsU
            entry:
              created: "2023-04-25T06:26:43.327Z"
              previous_transactions:
                - Blake2b256: zef-qw6W5lh_xC_zXJ9dX-AF8IyYQu22kd5oSQIciS0
              body:
                MakeClaimV1:
                  spec:
                    Identity:
                      Public:
                        Blake2b256: zef-qw6W5lh_xC_zXJ9dX-AF8IyYQu22kd5oSQIciS0
                  name: ~
            signatures:
              - Key:
                  key:
                    Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
                  signature:
                    Ed25519: HRyl_4jTIVciUOQ2i2FYKB3lZecbsvOJQ5-ZU0rWR56OxkdaTclJJqG8G75LipolQacPn1V8ABCFWQchzgqqBA
          - id:
              Blake2b256: Vx9YjwEtVVkUg8ImYYmZ1uQ0wvWzLZC0RiK34pHEVtQ
            entry:
              created: "2023-04-25T06:26:43.328Z"
              previous_transactions:
                - Blake2b256: 3TPOHkcINhwLlTqIaheIqCx8m-AonMp3nEGN7FK_YsU
              body:
                MakeClaimV1:
                  spec:
                    Name:
                      Public: Zefram Cochrane
                  name: ~
            signatures:
              - Key:
                  key:
                    Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
                  signature:
                    Ed25519: JkN-yWM9O2N34Sg8XmCSHj-lwiiDSKwSdOMiN-sPTMgLqIgHgldXEJYUecg9vB8ypMvKBxWrY_ZPH_o9Tin3Bg
          - id:
              Blake2b256: HMEmH9gT_5GalMWQe08xz8EnkgU3zzdecba8QZiWcZM
            entry:
              created: "2023-04-25T06:26:43.330Z"
              previous_transactions:
                - Blake2b256: Vx9YjwEtVVkUg8ImYYmZ1uQ0wvWzLZC0RiK34pHEVtQ
              body:
                MakeClaimV1:
                  spec:
                    Email:
                      Public: zef@starfleet.org
                  name: ~
            signatures:
              - Key:
                  key:
                    Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
                  signature:
                    Ed25519: 0dxrBbdrxegrhWM5aE0uAtRfISPiaagqGX04Y26Mc8phAR9CukVWfSS2s30Vo7ZIu4xHaSgYcqGO8nrp18NpCg
          - id:
              Blake2b256: xaiTDE4jcSq5slecvRxW5Z_NeOAyJ5aROQulrozIkqk
            entry:
              created: "2023-04-25T06:26:43.332Z"
              previous_transactions:
                - Blake2b256: HMEmH9gT_5GalMWQe08xz8EnkgU3zzdecba8QZiWcZM
              body:
                AddSubkeyV1:
                  key:
                    Sign:
                      Ed25519:
                        public: OXOI7j_7eqeDZzP_rRXp1_KTT-2Qt1AYBC7g3DOmsJ0
                        secret: ~
                  name: default/sign
                  desc: A default key for signing documents or messages.
            signatures:
              - Key:
                  key:
                    Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
                  signature:
                    Ed25519: kyBYwUeyiJwXs33zcXCxosGzscmd7ciUV0gxR8QWCOmvz_hvMX1AwBWE9sPxxooM6zumPywrKNzh_lwE7-KsAg
          - id:
              Blake2b256: 5ENaxEvokpQbg3MM25Y7t11eoHGXTigQmxhSjkZxBYQ
            entry:
              created: "2023-04-25T06:26:43.335Z"
              previous_transactions:
                - Blake2b256: xaiTDE4jcSq5slecvRxW5Z_NeOAyJ5aROQulrozIkqk
              body:
                AddSubkeyV1:
                  key:
                    Crypto:
                      Curve25519XChaCha20Poly1305:
                        public: 59RAyYlRdAAA1u3cWtqyfjGeZvRg2JV0iauGctNFoUk
                        secret: ~
                  name: default/crypto
                  desc: A default key for receiving private messages.
            signatures:
              - Key:
                  key:
                    Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
                  signature:
                    Ed25519: fLNWs39BLmHkcQEO_ZmMMZbGehEMMhRlCGVd26mX9IlefK_PX_sti9KKO9QAiEU8DqSxlSA85tf_i0NTnTWlCw
          - id:
              Blake2b256: HA9O3WKdAYlmLYiJtyzlPF8u6cFkuf8nuhDbu8PkVg0
            entry:
              created: "2023-04-25T06:26:43.338Z"
              previous_transactions:
                - Blake2b256: 5ENaxEvokpQbg3MM25Y7t11eoHGXTigQmxhSjkZxBYQ
              body:
                AddSubkeyV1:
                  key:
                    Secret:
                      mac:
                        Blake2b: 8B7NnVakLCWTgcQC9ySYXKp7KfqHSpbUmbz1t0cFxixCIdwXQHmJ9Kv2LlO-cDZrLK6KksKeWSQztO5C8l3xFw
                      data: ~
                  name: default/secret
                  desc: A default key allowing encryption/decryption of personal data.
            signatures:
              - Key:
                  key:
                    Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
                  signature:
                    Ed25519: GzHoF7eiF5KSJdaF994iERB3cIzlFr46bI4Cbd7TprMtvJHKysc9baeuITymwf0RW0vQLK8QQ4DXWGZXdWHwCg
          - id:
              Blake2b256: 0cHvXd7AhQtCg2VbWz9Mw7N8OJQBbzIMnEFuEBDUyJw
            entry:
              created: "2023-04-25T06:29:47.800Z"
              previous_transactions:
                - Blake2b256: HA9O3WKdAYlmLYiJtyzlPF8u6cFkuf8nuhDbu8PkVg0
              body:
                MakeClaimV1:
                  spec:
                    Photo:
                      Public: _9j_4AAQSkZJRgABAQEASABIAAD_2wBDABQODxIPDRQSEBIXFRQYHjIhHhwcHj0sLiQySUBMS0dARkVQWnNiUFVtVkVGZIhlbXd7gYKBTmCNl4x9lnN-gXz_2wBDARUXFx4aHjshITt8U0ZTfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHz_wgARCACZAJkDAREAAhEBAxEB_8QAGQAAAgMBAAAAAAAAAAAAAAAAAgMAAQQF_8QAFwEBAQEBAAAAAAAAAAAAAAAAAAECA__aAAwDAQACEAMQAAABz8qy6kCKsFKQiFAlllC9BqqhRB_Kto1Wg1aFLdXJKkoooql6BVkIQ0c7ZCqlhlhSyIXYVXGSkaQhCEHYtw2w6qqBi4gwOjoIztZdZohCENmUiWssIXTIRDShupsOdNKms1zVkIQhsxYQZqDYNIlqNMtDlfWRAlz0u5shCG3mtZZWlEWSsmnqQ0ZQGdOcym5lQhDbzsSUJbWlqgJSDCM9aIZbzdYzMVUIQ140UhkoGnqIgFdMq0uzeoHLuUXEqEIbMaKSy7q2mSIFVQ-XfQDlSnJ1hVzCEIa8bJkoixsrCQCpSXbaBcVXNvNGoCRLWG3G7mZVwy6FSFxQ-0yKmNIjWMaIspKqzbnbEKRqsM6iqoolMa2IAwBLQKFMlzmOhnQoCvIARVqci7WroWg7nnw-R1pIVlJnjGhrqIudGW3NAUFK-1qKucDMl3roFkTKykYrhRms0rc1agMlfRIihuMSas72DgTnM2LHiDNqOV0tKUWNURlxlFJsmiXQEc2ZlsSCLFgmuqmhlOV1p3I3GaKHS75oBVZ5m1uxYqwQKGtEuuAVo-zKmaCFHSmnLDCzUUq7EWWVQVS7syx1azAZoaIOlNaFSf_EACYQAAIBBAEEAgMBAQAAAAAAAAABAgMQERIhIDAxMhNBIzNCBEP_2gAIAQEAAQUCVsmw-b4NTXpz1oyZM9evaybWwY62sk447Goo9KMGuoqcmlTkPKJ9fCMn2yMHIjzKcVinhikTqZdGpKBFtE6jk5D7O-pKo5OKYpSGJpGNnFSRiriSw5D7P9SaclsaYEkKKFeSFTiift2MZEkhDtsbHyRN2RbyVPbsJWRJjkblLEiUNZ_HmSisS8y9u19MaMEPZx3SWojzL77UbOyRH1nJCdpL8j7OrFwO2RelN4KkN1TbtOnlyg10owYFgb48t9H2Y5tJ20jIqUtbKPDmIVpGdkOyyao9TIqgnlReSQuT44EvWZC3lzZT_WOyEnaZOOpF8wawNYMsfmSI8L6fmb5pv8ZgwIR9VfEuacfK4IPk0RIflH8ytSlrKS1FIyhCJsr_AK8kuCKUjDg88Wxylxnh-LQqZWjsjOFTjsT5_wA78y9KUhPhxNrP2fgm8ivGZsS0z8URRXyT5g_L9Fw4O2R3dkO8fEPaA_Nb1P8AmQv_AP_EABoRAAIDAQEAAAAAAAAAAAAAAAERADBAIGD_2gAIAQMBAT8B9corlFFF0ahUchpGQVGH3QsHBxOPb__EABQRAQAAAAAAAAAAAAAAAAAAAID_2gAIAQIBAT8BSH__xAApEAABAwIFBAICAwAAAAAAAAABABEhAhAgMDFRYRIiQHEyQQOBUtHx_9oACAEBAAY_AvPjxZ8GQycCFomOYdhqmVRoEBFyy4W6MIN8ul-lfFesrlkenRa9xTOW2t2kokvK7QU0ts6-6Su4TvlUnqH9ItuiHg65DmRsjnBAqVCmxz-kri0Wq9-AMB8AKb1eBK5TGxqBU5XOTomtonGmJ04waLZTOAv_AIuVxbTEcht1xYb4Xw-sf46sX3b2E1jtadCuMIp3Q4KKBtuLzYxh6al2rm0pzqi_8rftNaFrlTSCodTU6cFgqjb95wsVSqvdxg__xAAmEAEAAgIBBAEEAwEAAAAAAAABABEhMUEQUWFxgSAwobGRwfDx_9oACAEBAAE_IasWnEHzFX0joJntFcTUvotRi5cuX01qJ3FVGMIM4geelvM3xG-f4TI5ixfquFY2mWecIYOJh6kA4Szhx9gTANyokuLFcbaGKpYqvMQ3Bnca12wr0Lv6gh4QyL6L9XcQGfRy-J7yP-5dI0LLjmS3wLgXZw5gA1DNs0g8Rs8MsWOeOY7Kze1zb6q6VG0ouy7lEURSLuKwV_FAD5y24bVCULed4rMbzSrwTbH3AGD0kexOBeo32b-w10OOI6YUgu2e8tDpEDa5eqAdRcEGoMBEQRitiOoFAGvquX0fmjHSalzLL1EUPpiB-kHa_aKoJZVd8T5_MfqOirslUzSYOnZaIMjuMlnjAA8dpSUqCqEz-0KOITvLdwrMYK17IipqK-ZajMtu7jv7N04i4iHRUrivxQECmIblQQ0_Z1WMNt9FxpFQ7svdk0-moTFAxBzh2mSH8RM_SLShuMupiPnUU0kYEqJLzDAzBlG3QS21jmpU4ONxM5B-IirGLyeirLcIoPxFcTP0io70KLM3BRL7KFuaEFBTFWxqJC3REXbXaVzLkeYr0bQVmKCkK6HKFn9QsCpeHiYLf9hoPe44juXWpZhoZMxlWhWJmMZ7Stf9QzbW-IvwnqgteZfYlQm1_cVIHcRpxLn3cuvXQ5TGPMULMK8RmcTGvxFb3ARfEoAPE8EWqzZPJ_VMw0Bi3bgiLy8I5th-kMZ-f4lHki0TFLDkdfE3uzU2EGHCqeYnL7YHocjwjodmYBdlBrvdw1IYjA2kbOZ2l7HEbyrMElkWCWXuVmHwJqgrt2jekoVz8T_VQwl_mYYajsdpdTD8TIidON-GZHzLKcIHszNak4uUzNId4eyqMxk4wqWYJ81Pc6HicvSzn0cw1Pwpun7Cf4-5-InPxGOfof_aAAwDAQACAAMAAAAQ9-Q77rbigk_TnwZTrEAA20gMSA_AAAGJgTr0IAAAPgSSbvkgAAACZ0SQtFAA6IYE0Yk_AAXe6SfUMrAAnT_FC9FWAALzCQiJBNAAgZ1pEgpZtAivFG8sfvXggadhxhptmKJp_cYIhjDGbxyMkwZfDzvxvXgQ4NSyrFdANef3Vi4IOZTQd6yQ6sL0yGqQvKPUNYrQWgvI_8QAHBEAAwEBAQEBAQAAAAAAAAAAAAERECAwQCEx_9oACAEDAQE_EEJlL8VKX7p8aJ8LELH7Qm8EPylEEFlNaJh-KEIJlJlF50hfh_dRdXgmoNU_m0XDGPl6xeILILRopdeITxatsKMY0QmvYIXK4eNEGiDZcuXlYxsuseUuvE-FrKJ9TXiFtG8Y16ITLlJl_fc2IQ49Qu2LYXSj1C7fouP_xAAaEQACAwEBAAAAAAAAAAAAAAABEQAQIDBA_9oACAECAQE_EMriIPCIKG3ByG1FFBFFRtRdALIiioUeQMFmGOgY8DYgMcceHTggh7OOnBBD1WR3eR5BQ8Qp8HhcHYjp-U2MvChFDAhsaWhsWaMejT0KGhBZ4CO1agEVCjzOxRv_xAAmEAEAAgMAAgICAgMBAQAAAAABABEhMUFRYXGBIKEQkbHB8NHx_9oACAEBAAE_EEQILEo1qWaGJcXn3Cpf1AlxLLqDWB9y7sj6IfKH4wy1UiPuFsQrstRm5g2xxlpaW-YKrTcpiW_EMWq8xG7uFVb9QXRuUYeZ5MPEQ40zwCpYabnueQPlj-o2AInE_mn8UepYvxNUIHKh6Q8trGHJVc5EHz4hFkvEuzjCq8wZUyzZ332PuFryRfyMuDc4VETFZgKwQAuYzJNSvjxFVqHwSmMKDo5AaBt0FXqDghbF9PP7leS_XIsUj9zd-WQrMW0CpiF2JGwsuqi40C0ao39_UZqs4S06YhPVRswsB0MLR1EhrRitAAbUKq_u5fgWVZVZGjLA2xbAL_7Nf3KMaaZ3Z1EJ6QBSPSCvyPllgJyWsTLcFx0FF2uMHkLlIHCAUxnzUUwymEAe2ISy4KmXfMtWBetss5kJ1DP3GUMvHlmOGraIbW7Xydg7D1AYq8bJrJqXGy9ltnz2Ds3-NT9JQIy4ZlQMU0rFKFvct4OSvAICthz1MLY_EGEYcRcZJjObjFhWaQmou_PYCAlX5hNmqmVp5lyj8-IaUCqnNR_EwjYjdzGpAddSsH9wAYKNQMrihs2Zg2NjKu-JrE3i77l0ys6yTL0LwNKlmQ11wxuLcNDhBHUJt-Jlhzcor3EQBRbbFAlAtQIYJRxAKAx5gIOncAcbLHHzHyyxZYkmzmhuABP9IY3VZE23ImP4jCpdmYVkfqKDolfcYldhUKvrPLXyolaMESC4rSQoxxY8YAtV0hLg9RRs1-5aFsin3-UFMDTCrqOyCBDdVVRW1p-5Qt36gOEya3EC17l-HKplbgP-IRVZ6gpp5uAXgu58ozc1_IWymBWY5-4Dgh1WyCghXVRYs5EuoQvsRmEs51Bc2lMOxhbbyeGIKhGgeSixllLZhb1EVdVvIiDA-nEqV8_xYUaxEyDEFNxfEqQS82-ooBFyyjpARzkye55FXd0TIXzMHoomK5CpajsDUpyaCCbN-JSAcYsr5wsG9ZhctKY733M5LGitiVoFVGKr4l5Zsb4TEsLAjbyFZNFV_kxnd3XfENZeUorkulWUdcsAMCLtK-oYjvfqVh38QLPUzRY-oEXyXljEVfMKFc-XqIbkLa5Eos7oNMJVle5Rqn_UK0oNvfUtZtOmmOlDKtZ_1IEgyqFnP_ImIUGEdhhXughUUx7iFKIpb57jUXoaG9vMHpJPyMBkVXmWQ0RqrAhcAUM7jltU6pupgAtqVBIBuvEfJRw9GPYLEPqpyFNZ0NjfGBAs1o6-oCbbfxLANNBBwkrhREAfENHlT6ioCrTB0xS9K2hqtkcJwbBhjDLUOjApFFt4iaxj3G-BG4mouBqL3oC4kCgR-WEvywxfmHO64RFLwe9iK7RRfTVTGFp1P_oxWYnG7zNqsMFm3iDI-Q4S4tezGE8fMG9hNd01LpGxXPYL4M_PcxvKqVD0F-zUIvT7ljDdQ80ZqAQ8A51BWCUh4Kg711RyGOhpIJG3RORUr8BNfMZZboMkx5IrQKtIdjVwUANRBsGr_wA_MuIA401j-4hKBZgXO5tZzyCllFcChfEG9rI5SxpNUlRJYHGKloq81M5CnQDo9PuJ2xUPaxXzE4dOKZl3AlBh0tiBba_cV2ivmfH8AFdYtRRhWh3yV5btzEyN8hJhnCuSmHkqfUtHGH1GKeq9NRBVSacv3BVDM6fqNpiCPB9NQ4KVaxTKVGXoGmqV1Xmo6KyAEtTxaOVqwqI1eRByJBKz5-Zv8iP7Zo_M6-X-DSMbPmftp-hNf-WZ-7_BLr8Ju-SH7p_rHT8fx__Z
                  name: ~
            signatures:
              - Key:
                  key:
                    Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
                  signature:
                    Ed25519: gRo-bg2xh9F4_k8EsY4-KDfhCz0dAn7vB9aqv07RubT7wGk5ZT33IOzEYBDIfxqKbbP5PfAJDr0u2MHjKnRiCQ
          - id:
              Blake2b256: b97xSSg79_yT2moVe_lx2T_Nf8a1nLRBvA28agnNBZo
            entry:
              created: "2023-04-25T06:38:56.185Z"
              previous_transactions:
                - Blake2b256: 0cHvXd7AhQtCg2VbWz9Mw7N8OJQBbzIMnEFuEBDUyJw
              body:
                MakeClaimV1:
                  spec:
                    Url:
                      Public: "https://news.ycombinator.com/user?id=xX_zefram420_Xx"
                  name: ~
            signatures:
              - Key:
                  key:
                    Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
                  signature:
                    Ed25519: QFhbg_827eaQIQ-8Dg10wySInyn8UAXUVvd3Lx-fLLohoaaIyq2Z1uxGikMUwPLiUXguhqLdtzL0CacCCNHCAA
signatures:
  - Key:
      key:
        Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
      signature:
        Ed25519: Rn4QF7He-ah4pmau5DamZzuzM2OOBIVpM-tLbfET7vWGJkychqtV1dPsKd9dhEFAjrDYhI17DcBHPSjzP2gzDQ
```

When all of these transactions are run in order, they spit out an identity object,
which looks like this:

```
---
id:
  Blake2b256: zef-qw6W5lh_xC_zXJ9dX-AF8IyYQu22kd5oSQIciS0
created: "2023-04-25T06:26:09.387Z"
policies:
  - id:
      Blake2b512: NWEUV8Fbr_2Q8t8MQfHfgac8dDMdpe9_ou9X0ZSqekXQYP722ehQIUcZK6Bz2gBla2uplS54YEVh5fMRpyil_Q
    policy:
      capabilities:
        - Permissive
      multisig_policy:
        MOfN:
          must_have: 1
          participants:
            - Key:
                name: ~
                key:
                  Ed25519: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
keychain:
  admin_keys:
    - key:
        Ed25519:
          public: 6T_gu9CFlfLSV5wU2oW6f3frgHTwjkMjpFD3qmTbX0k
          secret: ~
      name: alpha
      description: Your main admin key
      revocation: ~
  subkeys:
    - key:
        Sign:
          Ed25519:
            public: OXOI7j_7eqeDZzP_rRXp1_KTT-2Qt1AYBC7g3DOmsJ0
            secret: ~
      name: default/sign
      description: A default key for signing documents or messages.
      revocation: ~
    - key:
        Crypto:
          Curve25519XChaCha20Poly1305:
            public: 59RAyYlRdAAA1u3cWtqyfjGeZvRg2JV0iauGctNFoUk
            secret: ~
      name: default/crypto
      description: A default key for receiving private messages.
      revocation: ~
    - key:
        Secret:
          mac:
            Blake2b: 8B7NnVakLCWTgcQC9ySYXKp7KfqHSpbUmbz1t0cFxixCIdwXQHmJ9Kv2LlO-cDZrLK6KksKeWSQztO5C8l3xFw
          data: ~
      name: default/secret
      description: A default key allowing encryption/decryption of personal data.
      revocation: ~
claims:
  - id:
      Blake2b256: 3TPOHkcINhwLlTqIaheIqCx8m-AonMp3nEGN7FK_YsU
    spec:
      Identity:
        Public:
          Blake2b256: zef-qw6W5lh_xC_zXJ9dX-AF8IyYQu22kd5oSQIciS0
    stamps:
      - id:
          Blake2b256: ntjuW2H8MXdQBg5EVgo5Xm9J1HNFwFz_FyBg1XgQesg
        entry:
          stamper:
            Blake2b256: soF-XRZ54x_N-OONfZ_cxN77LemOOTb1cLODeRr1Pr0
          stampee:
            Blake2b256: zef-qw6W5lh_xC_zXJ9dX-AF8IyYQu22kd5oSQIciS0
          claim_id:
            Blake2b256: 3TPOHkcINhwLlTqIaheIqCx8m-AonMp3nEGN7FK_YsU
          confidence: Low
          expires: ~
        created: "2023-04-27T04:32:59.876Z"
        revocation: ~
    name: ~
  - id:
      Blake2b256: Vx9YjwEtVVkUg8ImYYmZ1uQ0wvWzLZC0RiK34pHEVtQ
    spec:
      Name:
        Public: Zefram Cochrane
    stamps: []
    name: ~
  - id:
      Blake2b256: HMEmH9gT_5GalMWQe08xz8EnkgU3zzdecba8QZiWcZM
    spec:
      Email:
        Public: zef@starfleet.org
    stamps: []
    name: ~
  - id:
      Blake2b256: 0cHvXd7AhQtCg2VbWz9Mw7N8OJQBbzIMnEFuEBDUyJw
    spec:
      Photo:
        Public: _9j_4AAQSkZJRgABAQEASABIAAD_2wBDABQODxIPDRQSEBIXFRQYHjIhHhwcHj0sLiQySUBMS0dARkVQWnNiUFVtVkVGZIhlbXd7gYKBTmCNl4x9lnN-gXz_2wBDARUXFx4aHjshITt8U0ZTfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHz_wgARCACZAJkDAREAAhEBAxEB_8QAGQAAAgMBAAAAAAAAAAAAAAAAAgMAAQQF_8QAFwEBAQEBAAAAAAAAAAAAAAAAAAECA__aAAwDAQACEAMQAAABz8qy6kCKsFKQiFAlllC9BqqhRB_Kto1Wg1aFLdXJKkoooql6BVkIQ0c7ZCqlhlhSyIXYVXGSkaQhCEHYtw2w6qqBi4gwOjoIztZdZohCENmUiWssIXTIRDShupsOdNKms1zVkIQhsxYQZqDYNIlqNMtDlfWRAlz0u5shCG3mtZZWlEWSsmnqQ0ZQGdOcym5lQhDbzsSUJbWlqgJSDCM9aIZbzdYzMVUIQ140UhkoGnqIgFdMq0uzeoHLuUXEqEIbMaKSy7q2mSIFVQ-XfQDlSnJ1hVzCEIa8bJkoixsrCQCpSXbaBcVXNvNGoCRLWG3G7mZVwy6FSFxQ-0yKmNIjWMaIspKqzbnbEKRqsM6iqoolMa2IAwBLQKFMlzmOhnQoCvIARVqci7WroWg7nnw-R1pIVlJnjGhrqIudGW3NAUFK-1qKucDMl3roFkTKykYrhRms0rc1agMlfRIihuMSas72DgTnM2LHiDNqOV0tKUWNURlxlFJsmiXQEc2ZlsSCLFgmuqmhlOV1p3I3GaKHS75oBVZ5m1uxYqwQKGtEuuAVo-zKmaCFHSmnLDCzUUq7EWWVQVS7syx1azAZoaIOlNaFSf_EACYQAAIBBAEEAgMBAQAAAAAAAAABAgMQERIhIDAxMhNBIzNCBEP_2gAIAQEAAQUCVsmw-b4NTXpz1oyZM9evaybWwY62sk447Goo9KMGuoqcmlTkPKJ9fCMn2yMHIjzKcVinhikTqZdGpKBFtE6jk5D7O-pKo5OKYpSGJpGNnFSRiriSw5D7P9SaclsaYEkKKFeSFTiift2MZEkhDtsbHyRN2RbyVPbsJWRJjkblLEiUNZ_HmSisS8y9u19MaMEPZx3SWojzL77UbOyRH1nJCdpL8j7OrFwO2RelN4KkN1TbtOnlyg10owYFgb48t9H2Y5tJ20jIqUtbKPDmIVpGdkOyyao9TIqgnlReSQuT44EvWZC3lzZT_WOyEnaZOOpF8wawNYMsfmSI8L6fmb5pv8ZgwIR9VfEuacfK4IPk0RIflH8ytSlrKS1FIyhCJsr_AK8kuCKUjDg88Wxylxnh-LQqZWjsjOFTjsT5_wA78y9KUhPhxNrP2fgm8ivGZsS0z8URRXyT5g_L9Fw4O2R3dkO8fEPaA_Nb1P8AmQv_AP_EABoRAAIDAQEAAAAAAAAAAAAAAAERADBAIGD_2gAIAQMBAT8B9corlFFF0ahUchpGQVGH3QsHBxOPb__EABQRAQAAAAAAAAAAAAAAAAAAAID_2gAIAQIBAT8BSH__xAApEAABAwIFBAICAwAAAAAAAAABABEhAhAgMDFRYRIiQHEyQQOBUtHx_9oACAEBAAY_AvPjxZ8GQycCFomOYdhqmVRoEBFyy4W6MIN8ul-lfFesrlkenRa9xTOW2t2kokvK7QU0ts6-6Su4TvlUnqH9ItuiHg65DmRsjnBAqVCmxz-kri0Wq9-AMB8AKb1eBK5TGxqBU5XOTomtonGmJ04waLZTOAv_AIuVxbTEcht1xYb4Xw-sf46sX3b2E1jtadCuMIp3Q4KKBtuLzYxh6al2rm0pzqi_8rftNaFrlTSCodTU6cFgqjb95wsVSqvdxg__xAAmEAEAAgIBBAEEAwEAAAAAAAABABEhMUEQUWFxgSAwobGRwfDx_9oACAEBAAE_IasWnEHzFX0joJntFcTUvotRi5cuX01qJ3FVGMIM4geelvM3xG-f4TI5ixfquFY2mWecIYOJh6kA4Szhx9gTANyokuLFcbaGKpYqvMQ3Bnca12wr0Lv6gh4QyL6L9XcQGfRy-J7yP-5dI0LLjmS3wLgXZw5gA1DNs0g8Rs8MsWOeOY7Kze1zb6q6VG0ouy7lEURSLuKwV_FAD5y24bVCULed4rMbzSrwTbH3AGD0kexOBeo32b-w10OOI6YUgu2e8tDpEDa5eqAdRcEGoMBEQRitiOoFAGvquX0fmjHSalzLL1EUPpiB-kHa_aKoJZVd8T5_MfqOirslUzSYOnZaIMjuMlnjAA8dpSUqCqEz-0KOITvLdwrMYK17IipqK-ZajMtu7jv7N04i4iHRUrivxQECmIblQQ0_Z1WMNt9FxpFQ7svdk0-moTFAxBzh2mSH8RM_SLShuMupiPnUU0kYEqJLzDAzBlG3QS21jmpU4ONxM5B-IirGLyeirLcIoPxFcTP0io70KLM3BRL7KFuaEFBTFWxqJC3REXbXaVzLkeYr0bQVmKCkK6HKFn9QsCpeHiYLf9hoPe44juXWpZhoZMxlWhWJmMZ7Stf9QzbW-IvwnqgteZfYlQm1_cVIHcRpxLn3cuvXQ5TGPMULMK8RmcTGvxFb3ARfEoAPE8EWqzZPJ_VMw0Bi3bgiLy8I5th-kMZ-f4lHki0TFLDkdfE3uzU2EGHCqeYnL7YHocjwjodmYBdlBrvdw1IYjA2kbOZ2l7HEbyrMElkWCWXuVmHwJqgrt2jekoVz8T_VQwl_mYYajsdpdTD8TIidON-GZHzLKcIHszNak4uUzNId4eyqMxk4wqWYJ81Pc6HicvSzn0cw1Pwpun7Cf4-5-InPxGOfof_aAAwDAQACAAMAAAAQ9-Q77rbigk_TnwZTrEAA20gMSA_AAAGJgTr0IAAAPgSSbvkgAAACZ0SQtFAA6IYE0Yk_AAXe6SfUMrAAnT_FC9FWAALzCQiJBNAAgZ1pEgpZtAivFG8sfvXggadhxhptmKJp_cYIhjDGbxyMkwZfDzvxvXgQ4NSyrFdANef3Vi4IOZTQd6yQ6sL0yGqQvKPUNYrQWgvI_8QAHBEAAwEBAQEBAQAAAAAAAAAAAAERECAwQCEx_9oACAEDAQE_EEJlL8VKX7p8aJ8LELH7Qm8EPylEEFlNaJh-KEIJlJlF50hfh_dRdXgmoNU_m0XDGPl6xeILILRopdeITxatsKMY0QmvYIXK4eNEGiDZcuXlYxsuseUuvE-FrKJ9TXiFtG8Y16ITLlJl_fc2IQ49Qu2LYXSj1C7fouP_xAAaEQACAwEBAAAAAAAAAAAAAAABEQAQIDBA_9oACAECAQE_EMriIPCIKG3ByG1FFBFFRtRdALIiioUeQMFmGOgY8DYgMcceHTggh7OOnBBD1WR3eR5BQ8Qp8HhcHYjp-U2MvChFDAhsaWhsWaMejT0KGhBZ4CO1agEVCjzOxRv_xAAmEAEAAgMAAgICAgMBAQAAAAABABEhMUFRYXGBIKEQkbHB8NHx_9oACAEBAAE_EEQILEo1qWaGJcXn3Cpf1AlxLLqDWB9y7sj6IfKH4wy1UiPuFsQrstRm5g2xxlpaW-YKrTcpiW_EMWq8xG7uFVb9QXRuUYeZ5MPEQ40zwCpYabnueQPlj-o2AInE_mn8UepYvxNUIHKh6Q8trGHJVc5EHz4hFkvEuzjCq8wZUyzZ332PuFryRfyMuDc4VETFZgKwQAuYzJNSvjxFVqHwSmMKDo5AaBt0FXqDghbF9PP7leS_XIsUj9zd-WQrMW0CpiF2JGwsuqi40C0ao39_UZqs4S06YhPVRswsB0MLR1EhrRitAAbUKq_u5fgWVZVZGjLA2xbAL_7Nf3KMaaZ3Z1EJ6QBSPSCvyPllgJyWsTLcFx0FF2uMHkLlIHCAUxnzUUwymEAe2ISy4KmXfMtWBetss5kJ1DP3GUMvHlmOGraIbW7Xydg7D1AYq8bJrJqXGy9ltnz2Ds3-NT9JQIy4ZlQMU0rFKFvct4OSvAICthz1MLY_EGEYcRcZJjObjFhWaQmou_PYCAlX5hNmqmVp5lyj8-IaUCqnNR_EwjYjdzGpAddSsH9wAYKNQMrihs2Zg2NjKu-JrE3i77l0ys6yTL0LwNKlmQ11wxuLcNDhBHUJt-Jlhzcor3EQBRbbFAlAtQIYJRxAKAx5gIOncAcbLHHzHyyxZYkmzmhuABP9IY3VZE23ImP4jCpdmYVkfqKDolfcYldhUKvrPLXyolaMESC4rSQoxxY8YAtV0hLg9RRs1-5aFsin3-UFMDTCrqOyCBDdVVRW1p-5Qt36gOEya3EC17l-HKplbgP-IRVZ6gpp5uAXgu58ozc1_IWymBWY5-4Dgh1WyCghXVRYs5EuoQvsRmEs51Bc2lMOxhbbyeGIKhGgeSixllLZhb1EVdVvIiDA-nEqV8_xYUaxEyDEFNxfEqQS82-ooBFyyjpARzkye55FXd0TIXzMHoomK5CpajsDUpyaCCbN-JSAcYsr5wsG9ZhctKY733M5LGitiVoFVGKr4l5Zsb4TEsLAjbyFZNFV_kxnd3XfENZeUorkulWUdcsAMCLtK-oYjvfqVh38QLPUzRY-oEXyXljEVfMKFc-XqIbkLa5Eos7oNMJVle5Rqn_UK0oNvfUtZtOmmOlDKtZ_1IEgyqFnP_ImIUGEdhhXughUUx7iFKIpb57jUXoaG9vMHpJPyMBkVXmWQ0RqrAhcAUM7jltU6pupgAtqVBIBuvEfJRw9GPYLEPqpyFNZ0NjfGBAs1o6-oCbbfxLANNBBwkrhREAfENHlT6ioCrTB0xS9K2hqtkcJwbBhjDLUOjApFFt4iaxj3G-BG4mouBqL3oC4kCgR-WEvywxfmHO64RFLwe9iK7RRfTVTGFp1P_oxWYnG7zNqsMFm3iDI-Q4S4tezGE8fMG9hNd01LpGxXPYL4M_PcxvKqVD0F-zUIvT7ljDdQ80ZqAQ8A51BWCUh4Kg711RyGOhpIJG3RORUr8BNfMZZboMkx5IrQKtIdjVwUANRBsGr_wA_MuIA401j-4hKBZgXO5tZzyCllFcChfEG9rI5SxpNUlRJYHGKloq81M5CnQDo9PuJ2xUPaxXzE4dOKZl3AlBh0tiBba_cV2ivmfH8AFdYtRRhWh3yV5btzEyN8hJhnCuSmHkqfUtHGH1GKeq9NRBVSacv3BVDM6fqNpiCPB9NQ4KVaxTKVGXoGmqV1Xmo6KyAEtTxaOVqwqI1eRByJBKz5-Zv8iP7Zo_M6-X-DSMbPmftp-hNf-WZ-7_BLr8Ju-SH7p_rHT8fx__Z
    stamps: []
    name: ~
  - id:
      Blake2b256: b97xSSg79_yT2moVe_lx2T_Nf8a1nLRBvA28agnNBZo
    spec:
      Url:
        Public: "https://news.ycombinator.com/user?id=xX_zefram420_Xx"
    stamps: []
    name: ~
stamps: []
```


{#
<h3 id="arch-keychain">Keychain</h3>
<p>
There are four main keys an identity uses for either updating or publishing.
</p>

<div class="">
	{% capture body %}
		<p>
		One key to rule them all. It is used to create the identity, and can be
		used to replace any of the other keys that control the identity.
		</p>
	{% endcapture %}
	{% include 'includes/components/key.njk' title="Alpha" body=body classes="bg-indigo-100" %}

	{% capture body %}
		<p>
		The policy key is used to create recovery policies, allowing the identity
		owner to replace compromised keys with newly-generated ones. A valid
		recovery can replace the policy, publish, and root keys.
		</p>
	{% endcapture %}
	{% include 'includes/components/key.njk' title="Policy" body=body classes="bg-yellow-100" %}

	<div class="grid sm:grid-cols-2 gap-4">
		{% capture body %}
			<p>
			The publish key allows signing and dating all published versions of a
			Stamp identity, useful for proving its overall correctness and preventing
			tampering.
			</p>
		{% endcapture %}
		{% include 'includes/components/key.njk' title="Publish" body=body classes="bg-green-100" %}

		{% capture body %}
			<p>
			The root key is effectively the daily-use key of the identity. It is used
			to sign claims, create stamps on the claims of others, manage your subkeys,
			and update any other part of your identity.
			</p>
		{% endcapture %}
		{% include 'includes/components/key.njk' title="Root" body=body classes="bg-red-100" %}
	</div>
</div>

<p>
The keychain also holds "subkeys" which are either revoked/replaced keys from the
list above, or any number of active keys which allow the identity to encrypt or
sign messages or files.
</p>

<p>
Effectively, any key in the keychain can be updated <em>except the alpha key</em>,
which cannot ever change. If the alpha key is stolen, the identity is forever lost
and most be revoked entirely.  However, with an effective recovery policy, it is
possible you would never even need to use the alpha key, so it can be tucked away
inside a vault somewhere.
</p>

<h3 id="arch-recovery">Recovery</h3>

<p>
If we've learned one thing from PGP and cryptocurrencies, it's that key management
is really, really hard, even for complete nerds. So it follows that an identity
system that relies on key management should be a) hard to misuse and b) easy to
recover from misuse.
Stamp's recovery system attempts to provide a way to make key management accidents
not so fatal. It allows setting up a set of rules <em>before an accident happens</em>
that allow you to recover from that accident. How does this work?
</p>

<p>
Every Stamp identity has the concept of being <em class="text-green-600">valid</em>.
If the identity has signatures that don't match certain keys, or parts of the
identity that stray from the signatures, then the identity is
<em class="text-red-600">invalid</em> and the implementations won't let you interact
with it in any way.
</p>

<p>
So if your root key is stolen and you need to change it, you can't just slap a new
root key in there and go to town. You need to create a transaction, signed by your
alpha key, that replaces the old root key. But if you're following best practices,
your alpha key is stored separately from your identity and is locked in a safe
protected by armed guards on a space station in geosynchronous orbit.
</p>

<p>
Luckily, you were <em>super smart</em> and created a recovery policy:
</p>

<pre class="codeblock"><code>---
Any:
  - All: 
      - OfN:
          must_have: 1
          pubkeys:                      
            - Ed25519: hxJNDiXrMu3ahhhl9DDgkipiry1iw-9aoz8FOjhz3K0
            - Ed25519: el09jpXlNktjrb63_q75zlIJyjFmI30fBA4DI5OBj7o              
      - OfN:
          must_have: 1                   
          pubkeys:                     
            - Ed25519: g3yYPVK8L4NiuTikdivlDNJ_brdZWA-cEjfNeASQFt0
            - Ed25519: 4rkAHQYDj5YKfAl_40O8JOLbApByHruaWwWIj1EeSMo
  - OfN:
      must_have: 3
      pubkeys:
        - Ed25519: 0FwmCwC7G2V2g7L_yJjH_HzUjQM3SDotmRvuFe2eqpk
        - Ed25519: R8R7t0JZQw80VyZrdk35BLPzlUCHY515zXSrEPJu2Ro
        - Ed25519: el09jpXlNktjrb63_q75zlIJyjFmI30fBA4DI5OBj7o
        - Ed25519: hxJNDiXrMu3ahhhl9DDgkipiry1iw-9aoz8FOjhz3K0
</code></pre>

<p>
Above, <code>Any</code> is an <code>OR</code>, <code>All</code> is an <code>AND</code>
and <code>OfN</code> is a specification that of the given public keys, a recovery
request must have <em>at least <code>N</code></em> signatures to be valid.
</p>

<p>
Effectively what we have is a set of conditions requiring some combination of signatures
from public keys that you specify beforehand. If a set of signatures on a recovery
request satisfy the policy, the request is marked as <em class="text-green-600">valid</em>
and its action is executed (the only available action is to replace the policy, publish,
and root keys all at once). You can create any amount of nested conditions that satisfy
whatever balance between security and ease of recovery that you desire.
</p>

<p>
Recovery policies give you and your community (family, friends, institutions) a
way to help you recover from otherwise fatal mistakes relating to key management.
</p>

<h3 id="arch-stampnet">StampNet</h3>

<p>
Great so you've created a new identity, and it has a bunch of well-thought-out claims
and you're ready to make or receive stamps or set up a recovery policy. How do you
find other people's identities?
</p>

<p>
StampNet is (going to be) a p2p network for storage of identities. It has three main
functions.
</p>

<div class="grid md:grid-cols-3 gap-4">
	{% capture body %}
		<p>
		Anybody can connect to the network and ask for a publicly-stored identity.
		Doesn't matter if you're rich, poor, tall, short, skinny, fat, or a brain in a jar.
		All published identities are always accessible to anyone who can connect.
		</p>
	{% endcapture %}
	{% include 'www/includes/components/id-part.njk' title="Retrieval" body=body classes="bg-indigo-100" %}

	{% capture body %}
		<p>
		Any user of the Stamp protocol can use StampNet to make sure their private
		identity is in-sync between their devices. The synced updates to your identity
		are only available to the devices you approve beforehand.
		</p>
	{% endcapture %}
	{% include 'www/includes/components/id-part.njk' title="Syncing" body=body classes="bg-yellow-100" %}

	{% capture body %}
		<p>
		Public storage of your published identity requires StampNet <em>membership</em>,
		which is granted through the stamps of existing network members. These stamps
		are limited, and members must choose who they stamp wisely.
		</p>
	{% endcapture %}
	{% include 'www/includes/components/id-part.njk' title="Storage" body=body classes="bg-green-100" %}
</div>

<p>
Membership is currently a loosely-defined topic and
<a href="https://github.com/stamp-protocol/tracker/issues/15">discussion is currently ongoing</a>.
</p>

<p>
One of the goals of StampNet is to <strong>avoid blockchain-itis</strong> and act
as a p2p network in its own right without the need to form some sort of global
consensus. If it turns out blockchains are beneficial enough that the pros outweigh
the cons, then so be it, but blockchain should not be used unless absolutely needed.
</p>


#}

